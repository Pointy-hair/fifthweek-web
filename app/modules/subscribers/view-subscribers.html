<fw-error-message value="model.errorMessage"></fw-error-message>

<div ng-if="model.isLoading && !model.errorMessage" class="updating-area">
  <i class="fa fa-refresh fa-spin"></i>
</div>

<fw-panel12 ng-if="!model.isLoading && !model.errorMessage">
  <p>
    Your total revenue is <strong><fw-price value="model.totalRevenue" show-interval="false"></fw-price></strong>,
    and your estimated revenue over the next week is <strong><fw-price value="model.estimatedWeeklyRevenue" show-interval="false"></fw-price></strong>.
  </p>
  <p>
    You have <strong>{{model.totalSubscriptions}}</strong> subscriptions from <strong>{{model.subscribers.length}}</strong> subscribers.
    <span ng-if="model.unacceptablePrices"><strong>{{model.unacceptablePrices}}</strong>
    subscriptions are inactive because the user has not accepted the current price.</span>
  </p>
  <table class="table" ng-if="model.subscribers.length">
    <thead>
    <tr>
      <th>Username</th>
      <th>Channels</th>
      <th>Subscribed</th>
      <th>Price</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="subscriber in model.subscribers" class="subscriber-panel" id="subscriber-panel-{{$index}}">
      <td><p>{{subscriber.username}}</p></td>
      <td><p ng-repeat="channel in subscriber.channels">{{channel.name}}</p></td>
      <td><p ng-repeat="channel in subscriber.channels">{{channel.subscriptionStartDate | date: 'd MMM yy'}}</p></td>
      <td><p ng-repeat="channel in subscriber.channels">
        <i ng-if="!subscriber.freeAccessEmail && channel.isPaying" class="fa fa-check"></i>
        <i ng-if="!subscriber.freeAccessEmail && !channel.isPaying" class="fa fa-times"></i>
        <i ng-if="subscriber.freeAccessEmail"  class="fa fa-street-view"></i>
      </p></td>
    </tr>
    </tbody>
  </table>
</fw-panel12>
